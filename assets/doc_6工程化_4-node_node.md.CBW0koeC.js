import{_ as i,c as a,o as n,ae as e}from"./chunks/framework.DD4G2i-B.js";const l="/doc/assets/image-20250305115142558.4qhdoFGw.png",t="/doc/assets/image-20250305150241455.CZAKxr7y.png",p="/doc/assets/image-20250305150645076.CKXczC8U.png",h="/doc/assets/image-20250305155816799.PhJR1NTz.png",k="/doc/assets/image-20250305160152791.CzIpnBHN.png",r="/doc/assets/image-20250306105047359.BPrUTZvk.png",d="/doc/assets/image-20250305185907093.BQ991exr.png",o="/doc/assets/image-20250305190621136.D4toubM4.png",E="data:image/png;base64,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",g="/doc/assets/image-20250305190652269.BKmq8ic8.png",c="data:image/png;base64,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",B=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"doc/6工程化/4-node/node.md","filePath":"doc/6工程化/4-node/node.md"}'),A={name:"doc/6工程化/4-node/node.md"};function y(u,s,F,m,C,b){return n(),a("div",null,s[0]||(s[0]=[e(`<h3 id="nodejs" tabindex="-1">NodeJs <a class="header-anchor" href="#nodejs" aria-label="Permalink to &quot;NodeJs&quot;">​</a></h3><p><a href="https://nqdeng.github.io/7-days-nodejs" target="_blank" rel="noreferrer">https://nqdeng.github.io/7-days-nodejs</a></p><p>中文文档：<a href="https://npm.nodejs.cn/" target="_blank" rel="noreferrer">https://npm.nodejs.cn/</a></p><h2 id="_1、什么是nodejs" tabindex="-1">1、什么是nodejs？ <a class="header-anchor" href="#_1、什么是nodejs" aria-label="Permalink to &quot;1、什么是nodejs？&quot;">​</a></h2><ul><li><p>Chrome V8 引擎</p><p><code>将js代码高效的解析并转换成计算机可直接运行的机器码</code>，让js程序能在浏览器、服务器等环境中快速执行</p></li><li><p>浏览器能执行js代码就是因为浏览器内置了js引擎，如Chrome V8 引擎</p></li><li><p>Node.js 的线程模型是一个<strong>单线程与多线程结合</strong>的架构</p><ol><li>其设计核心在于<strong>主线程的单线程事件循环机制</strong>，</li><li>底层通过<strong>异步I/O、线程池和Worker Threads模块</strong>实现了多线程能力。</li></ol></li></ul><h2 id="_2、模块化架构" tabindex="-1">2、模块化架构 <a class="header-anchor" href="#_2、模块化架构" aria-label="Permalink to &quot;2、模块化架构&quot;">​</a></h2><p>通过<code>module模块系统</code>划分功能</p><ul><li>核心模块：http、fs</li><li>第三方：npm（node package manager）</li><li>还可以使用require引入模块，exports导出模块</li></ul><p>counter.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1-模块导出</span></span></code></pre></div><p>main.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./counter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2-模块导入</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./counter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3-module对象：可以访问到当前模块的一些相关信息</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hello</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello World!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 看图片</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 4-模块初始化：一个模块中的JS代码仅在模块第一次被使用时执行一次，并在执行过程中初始化模块的导出对象。之后，缓存起来的导出对象被重复利用。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.js 是主应用程序</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count1); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span></code></pre></div><p><img src="`+l+`" alt="image-20250305115142558"></p><h2 id="_3、模块路径解析规则" tabindex="-1">3、模块路径解析规则 <a class="header-anchor" href="#_3、模块路径解析规则" aria-label="Permalink to &quot;3、模块路径解析规则&quot;">​</a></h2><p>上面这个图可以看见path在找<code>node_modules</code>，这是node找模块包的优先级，不断向上找直到根</p><p>可以使用NODE_PATH变量，指定额外的模块搜索路径</p><p>Window写法：NODE_PATH环境变量：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> NODE_PATH=/home/user/lib;/home/lib</span></span></code></pre></div><p>当使用<code>require(&#39;foo/bar&#39;)</code>的方式加载模块时，则NodeJS依次尝试以下路径。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span> /home/user/lib/foo/bar</span></span>
<span class="line"><span> /home/lib/foo/bar</span></span></code></pre></div><h2 id="_4、package" tabindex="-1">4、package <a class="header-anchor" href="#_4、package" aria-label="Permalink to &quot;4、package&quot;">​</a></h2><p>模块化</p><p><img src="`+t+`" alt="image-20250305150241455"></p><p>package.json</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;counter1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 命名</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/main.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>test.js</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> counter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./counter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(counter);</span></span></code></pre></div><p>test.js执行这个require的时候会进入到counter这个文件夹，然后根据这个package.json找入口文件</p><p>看下axios的结构</p><p><img src="`+p+'" alt="image-20250305150645076"></p><h2 id="_5、npm" tabindex="-1">5、npm <a class="header-anchor" href="#_5、npm" aria-label="Permalink to &quot;5、npm&quot;">​</a></h2><p>和nodejs一起安装的包管理工具</p><ul><li>让用户从npm服务器中下载别人的三方包到本地使用</li><li>让用户从npm服务器中下载别人的命令行程序到本地使用</li><li>上传自己的包到npm服务器</li></ul><ol><li><p>下载三方包</p><p>npm install argv</p><p><img src="'+h+'" alt="image-20250305155816799">这个文件就可以管理所有的包</p><p><img src="'+k+`" alt="image-20250305160152791">安装的包如果也依赖其他包的话就会有自己的node_modules，package.json的dependences也会有定义</p></li><li><p>安装命令行程序</p><p>-g：全局安装</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install echo -g</span></span></code></pre></div></li></ol><h2 id="_6、文件操作" tabindex="-1">6、文件操作 <a class="header-anchor" href="#_6、文件操作" aria-label="Permalink to &quot;6、文件操作&quot;">​</a></h2><h3 id="_6-1-buffer-数据块" tabindex="-1">6.1 Buffer（数据块） <a class="header-anchor" href="#_6-1-buffer-数据块" aria-label="Permalink to &quot;6.1 Buffer（数据块）&quot;">​</a></h3><p>缓冲区：是一种临时存储数据的机制，将js数据处理能力从string》》二进制数据</p><ul><li><p>是二进制数据容器</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 从字符串创建（默认 utf8 编码）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> buf1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello World&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li><li><p>内存分配</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 创建指定大小的空缓冲区（默认填充 0）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> buf2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alloc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li><li><p>编码支持</p><p><code>utf8</code>、<code>base64</code>、<code>hex</code> 等编码与字符串相互转换</p></li></ul><h4 id="拓展1-什么是utf8、base64编码" tabindex="-1">拓展1：什么是utf8、base64编码？ <a class="header-anchor" href="#拓展1-什么是utf8、base64编码" aria-label="Permalink to &quot;拓展1：什么是utf8、base64编码？&quot;">​</a></h4><h4 id="拓展2-什么是unicode-字符集" tabindex="-1">拓展2：什么是Unicode 字符集 <a class="header-anchor" href="#拓展2-什么是unicode-字符集" aria-label="Permalink to &quot;拓展2：什么是Unicode 字符集&quot;">​</a></h4><h3 id="_6-2-stream-数据流" tabindex="-1">6.2 Stream（数据流） <a class="header-anchor" href="#_6-2-stream-数据流" aria-label="Permalink to &quot;6.2 Stream（数据流）&quot;">​</a></h3><p>当内存中无法一次装下需要处理的数据时，或者一边读取一边处理更加高效时，我们就需要用到数据流。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(src);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chunk</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pause</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    doSomething</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resume</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;end&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    cleanUp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_6-3-file-system-文件系统" tabindex="-1">6.3 File System（文件系统） <a class="header-anchor" href="#_6-3-file-system-文件系统" aria-label="Permalink to &quot;6.3 File System（文件系统）&quot;">​</a></h3><h2 id="_7、网络操作" tabindex="-1">7、网络操作 <a class="header-anchor" href="#_7、网络操作" aria-label="Permalink to &quot;7、网络操作&quot;">​</a></h2><h3 id="_7-1-http-https" tabindex="-1">7.1 http/https <a class="header-anchor" href="#_7-1-http-https" aria-label="Permalink to &quot;7.1 http/https&quot;">​</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        key: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./ssl/default.key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cert: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./ssl/default.cer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> https.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 给多个域名添加证书</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foo.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    key: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./ssl/foo.com.key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cert: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./ssl/foo.com.cer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bar.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    key: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./ssl/bar.com.key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cert: fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./ssl/bar.com.cer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_7-1-url" tabindex="-1">7.1 url <a class="header-anchor" href="#_7-1-url" aria-label="Permalink to &quot;7.1 url&quot;">​</a></h3><p><img src="`+r+'" alt="image-20250306105047359"></p><h3 id="_7-2-socket" tabindex="-1">7.2 socket <a class="header-anchor" href="#_7-2-socket" aria-label="Permalink to &quot;7.2 socket&quot;">​</a></h3><p><code>================================================================================================</code></p><p>卡住<a href="https://nqdeng.github.io/7-days-nodejs/#5" target="_blank" rel="noreferrer">https://nqdeng.github.io/7-days-nodejs/#5</a></p><p>什么是进程线程的东西</p><h2 id="_8、进程" tabindex="-1">8、进程 <a class="header-anchor" href="#_8、进程" aria-label="Permalink to &quot;8、进程&quot;">​</a></h2><h2 id="思考" tabindex="-1">思考 <a class="header-anchor" href="#思考" aria-label="Permalink to &quot;思考&quot;">​</a></h2><h3 id="_1、process-env" tabindex="-1">1、process.env <a class="header-anchor" href="#_1、process-env" aria-label="Permalink to &quot;1、process.env&quot;">​</a></h3><h3 id="_2、分析一个node-modules包的package-json" tabindex="-1">2、分析一个node_modules包的package.json <a class="header-anchor" href="#_2、分析一个node-modules包的package-json" aria-label="Permalink to &quot;2、分析一个node_modules包的package.json&quot;">​</a></h3><h3 id="_3、一般我们会同时提供命令行模式和api模式两种使用方式" tabindex="-1">3、一般我们会同时提供命令行模式和API模式两种使用方式？ <a class="header-anchor" href="#_3、一般我们会同时提供命令行模式和api模式两种使用方式" aria-label="Permalink to &quot;3、一般我们会同时提供命令行模式和API模式两种使用方式？&quot;">​</a></h3><h3 id="_4、input标签-type-file-是什么文件类型-能否实现对文件的操作" tabindex="-1">4、input标签：type=file，是什么文件类型？能否实现对文件的操作？ <a class="header-anchor" href="#_4、input标签-type-file-是什么文件类型-能否实现对文件的操作" aria-label="Permalink to &quot;4、input标签：type=file，是什么文件类型？能否实现对文件的操作？&quot;">​</a></h3><h3 id="_5、文本编码是什么" tabindex="-1">5、文本编码是什么？ <a class="header-anchor" href="#_5、文本编码是什么" aria-label="Permalink to &quot;5、文本编码是什么？&quot;">​</a></h3><p>目的是</p><ul><li>字符到二进制的映射：给每个字符匹配一个数字编码：A -&gt; 65<code>（十进制）</code></li><li>跨设备兼容</li><li>支持多语言</li></ul><p>主流的编码标准：</p><ul><li><p>ASCII：128个</p><p>如：A -&gt; 0100 0001 <code>（二进制）</code></p></li><li><p>ISO-8859 系列</p></li><li><p>GB 系列（中文编码）</p><ol><li><p>GB2312</p></li><li><p>GBK：218886个字符</p><p>如：凱 -&gt; 8450</p></li></ol></li><li><p>Unicode</p><p><strong>目标</strong>：统一全球字符集（包含超过 14 万个字符）</p><p>用UTF编码的文件可能带有BOM，这个是可以标记这个文件unicode编码模式</p><p><img src="'+d+'" alt="image-20250305185907093"></p><ol><li><p><strong>UTF-8</strong>：可变长度（1-4 字节）</p><p>中 -&gt; 14989485（十进制）</p></li><li><p><strong>UTF-16</strong></p></li></ol></li></ul><h3 id="_6、乱码现象是如何产生的" tabindex="-1">6、乱码现象是如何产生的？ <a class="header-anchor" href="#_6、乱码现象是如何产生的" aria-label="Permalink to &quot;6、乱码现象是如何产生的？&quot;">​</a></h3><p><img src="'+o+'" alt="image-20250305190621136"></p><p><img src="'+E+'" alt="image-20250305190629109"></p><p><img src="'+g+'" alt="image-20250305190652269"></p><p><img src="'+c+'" alt="image-20250305190658480"></p><h3 id="_7、node的http模块创建的http服务器返回的响应是transfer-encoding-chunked方式传输的" tabindex="-1">7、node的http模块创建的http服务器返回的响应是transfer-encoding:chunked方式传输的？ <a class="header-anchor" href="#_7、node的http模块创建的http服务器返回的响应是transfer-encoding-chunked方式传输的" aria-label="Permalink to &quot;7、node的http模块创建的http服务器返回的响应是transfer-encoding:chunked方式传输的？&quot;">​</a></h3><p>transfer-encoding：用于指示消息正文在传输时使用的编码方式</p><p>常见的值有</p><ul><li><p>chunked：分块传输</p><p>大文件下载</p><p>实时聊天</p></li><li><p>压缩编码</p><p>gzip、deflate</p></li><li><p>identity：无编码处理</p></li></ul><p>因为默认情况下，使用<code>.writeHead</code>方法写入响应头后，允许使用<code>.write</code>方法写入任意长度的响应体数据，并使用<code>.end</code>方法结束一个响应。</p><p>由于响应体数据长度不确定，因此NodeJS自动在响应头里添加了<code>Transfer-Encoding: chunked</code>字段，并采用<code>chunked</code>传输方式。</p><p>但是当响应体数据长度确定时，可使用<code>.writeHead</code>方法在响应头里加上<code>Content-Length</code>字段。</p><h3 id="_8、cluster模块是对child-process模块的进一步封装-专用于解决单进程nodejs-web服务器无法充分利用多核cpu的问题。使用该模块可以简化多进程服务器程序的开发-让每个核上运行一个工作进程-并统一通过主进程监听端口和分发请求。" tabindex="-1">8、<code>cluster</code>模块是对<code>child_process</code>模块的进一步封装，专用于解决单进程NodeJS Web服务器无法充分利用多核CPU的问题。使用该模块可以简化多进程服务器程序的开发，让每个核上运行一个工作进程，并统一通过主进程监听端口和分发请求。 <a class="header-anchor" href="#_8、cluster模块是对child-process模块的进一步封装-专用于解决单进程nodejs-web服务器无法充分利用多核cpu的问题。使用该模块可以简化多进程服务器程序的开发-让每个核上运行一个工作进程-并统一通过主进程监听端口和分发请求。" aria-label="Permalink to &quot;8、`cluster`模块是对`child_process`模块的进一步封装，专用于解决单进程NodeJS Web服务器无法充分利用多核CPU的问题。使用该模块可以简化多进程服务器程序的开发，让每个核上运行一个工作进程，并统一通过主进程监听端口和分发请求。&quot;">​</a></h3>',77)]))}const D=i(A,[["render",y]]);export{B as __pageData,D as default};
