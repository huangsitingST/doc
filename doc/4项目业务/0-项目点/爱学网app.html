<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>爱学网app | 个人学习阅读文档</title>
    <meta name="description" content="A VitePress Site21">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/doc/assets/style.DYbc1eLI.css" as="style">
    <link rel="preload stylesheet" href="/doc/vp-icons.css" as="style">
    
    <script type="module" src="/doc/assets/app.C9f7ZlX8.js"></script>
    <link rel="preload" href="/doc/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/doc/assets/chunks/theme.Dea5qVXj.js">
    <link rel="modulepreload" href="/doc/assets/chunks/framework.DD4G2i-B.js">
    <link rel="modulepreload" href="/doc/assets/doc_4项目业务_0-项目点_爱学网app.md.DrZf_mQ-.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/doc/" data-v-9f43907a><!--[--><!--]--><!----><span data-v-9f43907a>个人学习阅读文档</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/doc/link.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/doc/doc/README.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>README</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/doc/doc/6%E5%B7%A5%E7%A8%8B%E5%8C%96/3-nginx/Nginx-%E4%B8%8A.html" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>文档</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="http://8.134.38.38/assets/%E5%89%8D%E7%AB%AF-%E9%BB%84%E6%96%AF%E5%A9%B7-%E4%B8%89%E5%B9%B4.pdf" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 20 20"><g fill="none"><path fill="currentColor" d="M6.5 2h6.685a1.5 1.5 0 0 1 1.106.486l4.314 4.702A1.5 1.5 0 0 1 19 8.202V18.5a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 5 18.5v-15A1.5 1.5 0 0 1 6.5 2" opacity=".2"></path><path fill="currentColor" d="M6.5 12.5a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1zm0 2.5a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1z"></path><path fill="currentColor" fill-rule="evenodd" d="M11.185 1H4.5A1.5 1.5 0 0 0 3 2.5v15A1.5 1.5 0 0 0 4.5 19h11a1.5 1.5 0 0 0 1.5-1.5V7.202a1.5 1.5 0 0 0-.395-1.014l-4.314-4.702A1.5 1.5 0 0 0 11.185 1M4 2.5a.5.5 0 0 1 .5-.5h6.685a.5.5 0 0 1 .369.162l4.314 4.702a.5.5 0 0 1 .132.338V17.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5z" clip-rule="evenodd"></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M11.5 2.1v4.7h4.7"></path><path fill="currentColor" d="M8.134 6.133a1.067 1.067 0 1 0 0-2.133a1.067 1.067 0 0 0 0 2.133"></path><path fill="currentColor" fill-rule="evenodd" d="M10.266 8.444c0-1.134-.955-1.955-2.133-1.955S6 7.309 6 8.444v.534a.356.356 0 0 0 .356.355h3.555a.356.356 0 0 0 .355-.355z" clip-rule="evenodd"></path></g></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="http://8.134.38.38/assets/%E5%89%8D%E7%AB%AF-%E9%BB%84%E6%96%AF%E5%A9%B7-%E4%B8%89%E5%B9%B4.pdf" aria-label target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><svg xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 20 20"><g fill="none"><path fill="currentColor" d="M6.5 2h6.685a1.5 1.5 0 0 1 1.106.486l4.314 4.702A1.5 1.5 0 0 1 19 8.202V18.5a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 5 18.5v-15A1.5 1.5 0 0 1 6.5 2" opacity=".2"></path><path fill="currentColor" d="M6.5 12.5a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1zm0 2.5a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1z"></path><path fill="currentColor" fill-rule="evenodd" d="M11.185 1H4.5A1.5 1.5 0 0 0 3 2.5v15A1.5 1.5 0 0 0 4.5 19h11a1.5 1.5 0 0 0 1.5-1.5V7.202a1.5 1.5 0 0 0-.395-1.014l-4.314-4.702A1.5 1.5 0 0 0 11.185 1M4 2.5a.5.5 0 0 1 .5-.5h6.685a.5.5 0 0 1 .369.162l4.314 4.702a.5.5 0 0 1 .132.338V17.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5z" clip-rule="evenodd"></path><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M11.5 2.1v4.7h4.7"></path><path fill="currentColor" d="M8.134 6.133a1.067 1.067 0 1 0 0-2.133a1.067 1.067 0 0 0 0 2.133"></path><path fill="currentColor" fill-rule="evenodd" d="M10.266 8.444c0-1.134-.955-1.955-2.133-1.955S6 7.309 6 8.444v.534a.356.356 0 0 0 .356.355h3.555a.356.356 0 0 0 .355-.355z" clip-rule="evenodd"></path></g></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>基建学习</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/doc/doc/6%E5%B7%A5%E7%A8%8B%E5%8C%96/3-nginx/Nginx-%E4%B8%8A.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Nginx-上</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/doc/doc/6%E5%B7%A5%E7%A8%8B%E5%8C%96/3-nginx/Nginx-%E4%B8%8B.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Nginx-下</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>基础</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/doc/doc/1%E5%9F%BA%E7%A1%80/2-js/js.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/doc/doc/1%E5%9F%BA%E7%A1%80/1-html/html.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>html</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/doc/doc/1%E5%9F%BA%E7%A1%80/0-css/css.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>css</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _doc_doc_4%E9%A1%B9%E7%9B%AE%E4%B8%9A%E5%8A%A1_0-%E9%A1%B9%E7%9B%AE%E7%82%B9_%E7%88%B1%E5%AD%A6%E7%BD%91app" data-v-e6f2a212><div><h1 id="爱学网app" tabindex="-1">爱学网app <a class="header-anchor" href="#爱学网app" aria-label="Permalink to &quot;爱学网app&quot;">​</a></h1><p>工作内容：爱学网app实现AI答疑功能</p><p>需求内容：学生通过题目&amp;拍照上传图片可以进行和ai聊天解答题目</p><p>技术核心：大模型对话、科目提示词定位</p><p><img src="/doc/assets/image-20250414150038980.CD_SLLVY.png" alt="image-20250414150038980"></p><h2 id="_1-上传图片的方式-拓展-文件上传的方式" tabindex="-1">1 上传图片的方式：拓展-文件上传的方式 <a class="header-anchor" href="#_1-上传图片的方式-拓展-文件上传的方式" aria-label="Permalink to &quot;1 上传图片的方式：拓展-文件上传的方式&quot;">​</a></h2><p>aliyun上传、七牛云上传</p><h2 id="_2-图片框题-识别图片的题目" tabindex="-1">2 图片框题&amp;识别图片的题目 <a class="header-anchor" href="#_2-图片框题-识别图片的题目" aria-label="Permalink to &quot;2 图片框题&amp;识别图片的题目&quot;">​</a></h2><p>使用阿里云集成的openai：<a href="https://apifox.com/apidoc/shared-2fd72ae0-84f1-4e2e-b210-8b204151d970" target="_blank" rel="noreferrer">https://apifox.com/apidoc/shared-2fd72ae0-84f1-4e2e-b210-8b204151d970</a></p><h2 id="_4-会话-指令id" tabindex="-1">4 会话：指令id <a class="header-anchor" href="#_4-会话-指令id" aria-label="Permalink to &quot;4 会话：指令id&quot;">​</a></h2><h2 id="_5-与安卓通信" tabindex="-1">5 与安卓通信 <a class="header-anchor" href="#_5-与安卓通信" aria-label="Permalink to &quot;5 与安卓通信&quot;">​</a></h2><p>使用js-bridge，核心是，应用端和h5端都把属性或者方法放在window下，两个端使用不同的方法去调用</p><p>应用端使用flutter，可以实现多端打包，虽然这么说，但是如果出现了不兼容的现象，其实也是应用端去做一个兼容解决</p><p>就像uniapp一样，也说是前端可以打包成h5、小程序、安卓、ios应用，但是有些兼容问题出现也需要通过代码和配置兼容</p><ul><li><p>h5调用native原生</p><p>应用端</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 注入对象，应用端实际上是在window中存放应用端的对象，里面包含属性和方法供h5端调用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webView.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addJavascriptInterface</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JsBridge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;JSBridge&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 定义注入的Jsbridge对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> JsBridge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @JavascriptInterface</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fun </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">takePhoto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">callbackId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 调用相机并返回结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>h5调用</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.JSBridge.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">takePhoto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;callback_123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></li><li><p>native调用h5</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Android获取H5页面标题</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webView.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">evaluateJavascript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript:document.title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String title </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 去除JSON引号</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>两种</p><ol><li><p>应用端监听到h5页面加载完毕后，可以执行</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String json </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;{&#39;key&#39;: &#39;value&#39;}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webView.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript:parseJson(&#39;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> json </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li><li><p>判断构建的版本看是否支持evaluateJavascript方式</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Build.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VERSION</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SDK_INT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Build.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VERSION_CODES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">KITKAT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    webView.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">evaluateJavascript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript:getResult()&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ValueCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @Override</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        public void </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onReceiveValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">String</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 处理 JS 返回的值（如 JSON 字符串）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    webView.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript:getResult()&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 低版本降级方案</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol></li></ul><h2 id="_6-鉴权方式" tabindex="-1">6 鉴权方式 <a class="header-anchor" href="#_6-鉴权方式" aria-label="Permalink to &quot;6 鉴权方式&quot;">​</a></h2><p>无状态 ===》有状态</p><h3 id="_6-1-basic-authentication" tabindex="-1">6.1 basic authentication <a class="header-anchor" href="#_6-1-basic-authentication" aria-label="Permalink to &quot;6.1 basic authentication&quot;">​</a></h3><p>通过将用户名密码<strong>Base64编码</strong>后的数据放在请求头<strong>Authorization</strong>中，服务端解码验证身份</p><h3 id="_6-2-session-cookie机制" tabindex="-1">6.2 session-cookie机制 <a class="header-anchor" href="#_6-2-session-cookie机制" aria-label="Permalink to &quot;6.2 session-cookie机制&quot;">​</a></h3><p>服务器创建session并生成唯一id，通过cookie传给客户端，cooke存在客户端中，后续请求是会自动传这个cookie验证在请求的set-cookie中</p><p>场景：用户在银行网站A中登陆，cookie处于有效中，可以在网站A植入恶意广告，用户点击进入网站B，网站B中引导用户点击，通过脚本方式之情转账请求，传的是相同cookie，服务端认为是正常操作。</p><p>这个操作就是CSRF攻击（通过伪造用户身份，利用目标网站对浏览器的信任机制（如Cookie中的会话凭证），执行未经授权的操作）</p><h3 id="_6-3-token验证" tabindex="-1">6.3 token验证 <a class="header-anchor" href="#_6-3-token验证" aria-label="Permalink to &quot;6.3 token验证&quot;">​</a></h3><h4 id="_1、什么是token验证-例子-jwt" tabindex="-1">1、什么是token验证&amp;例子：jwt <a class="header-anchor" href="#_1、什么是token验证-例子-jwt" aria-label="Permalink to &quot;1、什么是token验证&amp;例子：jwt&quot;">​</a></h4><p>公司统一认证方式</p><p>由后端根据用户名密码生成token（JWT：json web token），客户端存在请求的token中传递</p><p>jwt由三个部分构成：header.playload.signature</p><p>​ 算法 数据 服务端保存的一段字符串</p><img src="/doc/assets/image-20250415085934261.CMOAxuTD.png" alt="image-20250415085934261" style="zoom:24%;"><img src="/doc/assets/image-20250415090046160.1yh0lPqq.png" alt="image-20250415090046160" style="zoom:30%;"><p>公司的jwt例子：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>access_token: </span></span>
<span class="line"><span>&quot;eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiIxNjgxNzgwMjU3MTE1IiwiZXhwIjoxNzQ0NjY5NjA5LCJzdWIiOiIzMDkwNjUxODMxOTQ5Mzk1In0.oSHxncyj42ISGWweeT6COnaq4jUwtxVvNQPT26IIdax8fZFHZx90YJy8gveH-NwX-HhOj2j62iztwjpqgSDkIw&quot;</span></span></code></pre></div><img src="/doc/assets/image-20250415092251334.Cheb1LYJ.png" alt="image-20250415092251334" style="zoom:67%;"><h4 id="_2、例子-爱学网的登录例子" tabindex="-1">2、例子：爱学网的登录例子 <a class="header-anchor" href="#_2、例子-爱学网的登录例子" aria-label="Permalink to &quot;2、例子：爱学网的登录例子&quot;">​</a></h4><p><img src="/doc/assets/image-20250415103212705.Cf8tak-n.png" alt="image-20250415103212705"></p><p><img src="/doc/assets/image-20250415103403641.BlKbj5YJ.png" alt="image-20250415103403641"></p><p>公司全部的token用的是sessionid做token，问了后端，这个token不做过期时间限制。</p><p>这个account_center这个可以跟第三方接口登录。</p><p>ps：公司的中台都不用鉴权的，直接传数据就可以请求。</p><div class="caution custom-block github-alert"><p class="custom-block-title">CAUTION</p><p></p><p>什么第三方使用场景</p></div><h4 id="_3、refresh-token" tabindex="-1">3、refresh-token <a class="header-anchor" href="#_3、refresh-token" aria-label="Permalink to &quot;3、refresh-token&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;access_token&quot;: &quot;eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiIxNjgxNzgwMjU3MTE1IiwiZXhwIjoxNzQ0NjkxMDEzLCJzdWIiOiIzNDgwNDAxNjkwMDM5NjYyIn0.CsR4EGLnpyT8WZ4VogcMfHHQwYDKqXeEnADfP3tP6o4LK-7qKp_fYqqVbjghBkbu8prDr4A28drmbiB6OY9ZmQ&quot;,</span></span>
<span class="line"><span>    &quot;expires_in&quot;: 7200,</span></span>
<span class="line"><span>    &quot;refresh_token&quot;: &quot;YJGXNGEYNZATZDLKOC01ZJI1LWEZNTATZWYWYWUYZDDJOGQ5&quot;,</span></span>
<span class="line"><span>    &quot;token_type&quot;: &quot;Bearer&quot;</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>access_token：短效</p><p>expires_in：过期时间2h</p><p>refresh_token：长效token</p><p><img src="/doc/assets/image-20250415113510092.Dm0ZBaKW.png" alt="image-20250415113510092"></p><p>总结：在响应拦截中处理401未认证，使用refresh_token再去请求，如果未过期则可以更新access_token和refresh_token，如果refresh_token都过期了，则可以重新登录</p><h4 id="_4、sso-single-sign-on-单点登录-实现多系统统一认证" tabindex="-1">4、SSO：single sign on 单点登录（实现多系统统一认证） <a class="header-anchor" href="#_4、sso-single-sign-on-单点登录-实现多系统统一认证" aria-label="Permalink to &quot;4、SSO：single sign on 单点登录（实现多系统统一认证）&quot;">​</a></h4><p>测试网站：</p><p>教学研：<a href="https://ebag-test.readboy.com/teaching-learning-research/" target="_blank" rel="noreferrer">https://ebag-test.readboy.com/teaching-learning-research/</a></p><p>认证中心登录页：<a href="https://account-center-test.readboy.com/" target="_blank" rel="noreferrer">https://account-center-test.readboy.com/</a></p><h5 id="_4-1-逻辑图" tabindex="-1">4.1 逻辑图 <a class="header-anchor" href="#_4-1-逻辑图" aria-label="Permalink to &quot;4.1 逻辑图&quot;">​</a></h5><p>这里是公司单点登录的逻辑，业务网站例子是教学研</p><p>认证中心就是这个/v1/oauth2/authorize，如果请求中携带的cookie是合法的，那么就会返回code给业务网站，网站就可以拿这个code去获取login获取用户信息</p><p><img src="/doc/assets/image-20250415222145114.Ckf1UvmR.png" alt="image-20250415222145114"></p><p>分析下登录接口</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://api.ebag-test.readboy.com/login/v2/auth/token</span></span>
<span class="line"><span></span></span>
<span class="line"><span>F_code: YTRLMDU3ZTCTOGU5MS0ZM2ZHLTK5ZWUTMZI0NDNLYJEZOTC2</span></span>
<span class="line"><span>redirect_uri: https%3A%2F%2Febag-test.readboy.com%2Fteaching-learning-research%2F</span></span>
<span class="line"><span>F_from: 600000</span></span>
<span class="line"><span>userType: 2</span></span></code></pre></div><p><img src="/doc/assets/image-20250415213532702.DqpB7Y_2.png" alt="image-20250415213532702"></p><p>返回的数据中的sessionid是整个公司通用的token，account_token是与第三方协作的token数据</p><p>并且整个教学研的认证方式是query去传这个sessionid</p><h5 id="_4-2-核心要点" tabindex="-1">4.2 核心要点 <a class="header-anchor" href="#_4-2-核心要点" aria-label="Permalink to &quot;4.2 核心要点&quot;">​</a></h5><p>凡是进入到这个单点登录页面都要携带这个cookie，只有跟域名对应的cookie在控制台中采会显示出来</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://account-center-test.readboy.com/v1/oauth2/authorize?</span></span>
<span class="line"><span></span></span>
<span class="line"><span>client_id=1681780257115&amp;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>redirect_uri=https%3A%2F%2Febag-test.readboy.com%2Fteaching-learning-research%2F&amp;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>response_type=code</span></span></code></pre></div><p>认证中心判断这个cookie，这个cookie是认证中心产出的，登出cookie/有实效的cookie</p><ul><li>没有cookie，返回：{&quot;code&quot;:100400,&quot;data&quot;:</li><li>登出/过期的cookie：重定向到单点登录页面</li><li>合法的token：重定向到redirect_uri，且返回需要的response_type<img src="/doc/assets/image-20250415222616124.DE1iCORr.png" alt="image-20250415222616124"></li></ul><p>尝试：使用apifox调用认证中心的接口，使用登出的cookie去调上面的接口，是成功的<img src="/doc/assets/image-20250416094551632.BHIuuDh3.png" alt="image-20250416094551632" style="zoom:70%;"></p><h4 id="_5、oauth2协议标准" tabindex="-1">5、OAuth2协议标准 <a class="header-anchor" href="#_5、oauth2协议标准" aria-label="Permalink to &quot;5、OAuth2协议标准&quot;">​</a></h4><p>阮一峰理解OAuth 2.0：<a href="https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html" target="_blank" rel="noreferrer">https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html</a></p><h5 id="_5-1-what" tabindex="-1">5.1 what <a class="header-anchor" href="#_5-1-what" aria-label="Permalink to &quot;5.1 what&quot;">​</a></h5><p>服务提供商 —— 授权层（authorization layer）—[限权token]—》 客户端（第三方）</p><p>​ ｜ ｜</p><p>​ ———————————————[限权token访问服务提供商]——————————</p><p>应用A中存在重要用户信息，当第三方用户数据想去访问的时候就需要由应用A去授权，即access_token，但是有时间期限</p><ul><li>首次登录就会返回access_token</li><li>后面再去访问的时候就可以携带这个access_token去访问</li><li>access_token到期可以使用refresh_token去更新</li><li>两个token都过期了就需要重新授权</li></ul><h5 id="_5-2-授权的四种方式" tabindex="-1">5.2 授权的四种方式 <a class="header-anchor" href="#_5-2-授权的四种方式" aria-label="Permalink to &quot;5.2 授权的四种方式&quot;">​</a></h5><p>阮一峰：<a href="https://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html" target="_blank" rel="noreferrer">https://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html</a></p><ul><li><p>授权码（最完整、流程最严密的授权模式）</p><p>教学研用的授权码的方式，那这个code去获取token</p></li><li><p>密码式</p><p>爱学网web和app用的账号密码登录返回token</p></li><li><p>隐藏式</p><p>直接返回给A网站token</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">https</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//b.com/oauth/authorize?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  response_type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  client_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CLIENT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  redirect_uri</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CALLBACK_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  scope</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">read</span></span></code></pre></div><p><img src="/doc/assets/image-20250416143004338.DBuQ_48V.png" alt="image-20250416143004338"></p></li><li><p>凭证式</p><p>A直接向B请求令牌</p></li></ul><h5 id="_5-3-公司应用的实例" tabindex="-1">5.3 公司应用的实例： <a class="header-anchor" href="#_5-3-公司应用的实例" aria-label="Permalink to &quot;5.3 公司应用的实例：&quot;">​</a></h5><p>中台（数据中心）===&gt; 教学研（第三方应用）</p><p>​ ===&gt; 爱学网（第三方应用）</p><p>两个子应用都是调的同一个登录接口：<a href="https://api.ebag-test.readboy.com/login/v2/auth/login" target="_blank" rel="noreferrer">https://api.ebag-test.readboy.com/login/v2/auth/login</a></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>// 教学研传参：使用认证完之后的code去登录</span></span>
<span class="line"><span>F_code: M2E2ODC2MDMTNTU5NI0ZZJRJLWIWYTCTMJIZMZA3YMU5NGE4  （中台认证返回的code）</span></span>
<span class="line"><span>redirect_uri: https://ebag-test.readboy.com/teaching-learning-research/</span></span>
<span class="line"><span>F_from: 600000</span></span>
<span class="line"><span>userType: 2</span></span>
<span class="line"><span>F_sign:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 爱学网传参：使用用户名密码</span></span>
<span class="line"><span>username: 13210000001</span></span>
<span class="line"><span>password: a123456</span></span>
<span class="line"><span>userType: 2</span></span>
<span class="line"><span>platform: 101</span></span>
<span class="line"><span>		爱学网app传参</span></span>
<span class="line"><span>username: a211</span></span>
<span class="line"><span>password: a123456</span></span>
<span class="line"><span>userType: 1</span></span>
<span class="line"><span>platform: 103</span></span>
<span class="line"><span>F_from: 600000</span></span></code></pre></div><p>返回的数据是一样的</p><p><img src="/doc/assets/image-20250416110256391.n-dJ41m2.png" alt="image-20250416110256391"></p><h5 id="_5-4-更新令牌" tabindex="-1">5.4 更新令牌 <a class="header-anchor" href="#_5-4-更新令牌" aria-label="Permalink to &quot;5.4 更新令牌&quot;">​</a></h5><p>access_token和refresh_token结合过期时间去更新令牌，使用refresh_token去请求更新两个令牌</p><h5 id="_5-5-思考-如果用户的登录时间还没有过期-去认证中心应该是不用重新登录的-这个是怎么实现的" tabindex="-1">5.5 思考：如果用户的登录时间还没有过期，去认证中心应该是不用重新登录的，这个是怎么实现的？ <a class="header-anchor" href="#_5-5-思考-如果用户的登录时间还没有过期-去认证中心应该是不用重新登录的-这个是怎么实现的" aria-label="Permalink to &quot;5.5 思考：如果用户的登录时间还没有过期，去认证中心应该是不用重新登录的，这个是怎么实现的？&quot;">​</a></h5><p>正常来说，是需要带access_token去访问的，但是公司的认证不携带这个中台token，以及，中台的其他接口都没有做鉴权操作。<img src="/doc/assets/image-20250416112831390.BwyhyOmf.png" alt="image-20250416112831390" style="zoom:70%;"></p><h5 id="_5-4-用户登录状态被挤掉" tabindex="-1">5.4 用户登录状态被挤掉？ <a class="header-anchor" href="#_5-4-用户登录状态被挤掉" aria-label="Permalink to &quot;5.4 用户登录状态被挤掉？&quot;">​</a></h5><p>后端的实现思路：</p><ol><li uid:="" sessionId1="">ip1登录，数据库中存</li><li uid:="" sessionId2="">ip2使用相同uid登录，数据库中更新</li><li>ip1仍然用sessionId1去访问，数据库中比对不上，提示强制退出</li></ol><h4 id="_6、市面上的登录" tabindex="-1">6、市面上的登录 <a class="header-anchor" href="#_6、市面上的登录" aria-label="Permalink to &quot;6、市面上的登录&quot;">​</a></h4><ol><li><p>传统凭证方式</p><ol><li>用户名密码登录</li><li>手机号码+验证码</li></ol></li><li><p>第三方授权登录</p><ol><li><p>社交媒体：微信、支付宝、抖音、google、钉钉</p></li><li><p>政府/机构统一认证：</p><p>权威性较高的统一认证平台，用户注册后，第三方系统就可以使用sso授权登录</p></li></ol></li><li><p>生物识别：指纹、面部、虹膜扫描</p></li><li><p>无密码/新兴技术</p><ol><li>扫码登录</li><li>游客模式</li><li>单点登录</li></ol></li><li><p>特殊场景登录</p><ol><li>邀请码注册</li></ol></li></ol><p>7、MFA认证</p><p>Mutil-Factor Authentication。 解决两种及以上独立验证因素</p><p>8、阿里云的RAM用户</p><p>由主账户创建账户并分配权限</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/doc/doc/6%E5%B7%A5%E7%A8%8B%E5%8C%96/3-nginx/Nginx-%E4%B8%8A.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Nginx-上</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"doc_1基础_0-css_css.md\":\"UwU9CQi1\",\"doc_1基础_1-html_html.md\":\"CiiMFI0E\",\"doc_1基础_2-js_js.md\":\"6WwPEizj\",\"doc_1基础_2-js_原理_大师课1-2节资料_01. 原理-事件循环_课件.md\":\"7lWVZ_Km\",\"doc_1基础_2-js_原理_大师课1-2节资料_02. 原理-浏览器是如何工作的_css 属性计算过程.md\":\"BGRy8A0B\",\"doc_1基础_2-js_原理_大师课1-2节资料_02. 原理-浏览器是如何工作的_你不知道的 css 之包含块.md\":\"KlfaKcyx\",\"doc_1基础_2-js_原理_大师课1-2节资料_02. 原理-浏览器是如何工作的_面试题.md\":\"Bjwn6clg\",\"doc_2框架_0-vite_文档学习.md\":\"DMsuhkpd\",\"doc_2框架_0-vite_环境变量.md\":\"B0X8FQe6\",\"doc_2框架_1-vue_0-从零开始搭建一个vue.md\":\"DtKvj5bx\",\"doc_2框架_1-vue_1-vue-router.md\":\"C_-l0YHi\",\"doc_2框架_1-vue_2-vue学习.md\":\"jEoPVoQc\",\"doc_2框架_1-vue_3-面试题.md\":\"DqNG-vCH\",\"doc_2框架_1-vue_vue.md\":\"CMoqoFBi\",\"doc_2框架_1-vue_语法.md\":\"qOpL0fd5\",\"doc_2框架_2-git_git.md\":\"6DhqU9XZ\",\"doc_2框架_2-git_部署一套gitlab实现ci流水线.md\":\"BIHPfLQ5\",\"doc_2框架_3-概念.md\":\"CYGufaj2\",\"doc_2框架_4-状态管理工具.md\":\"U6f_39Ol\",\"doc_3运行环境_浏览器.md\":\"4xwVB011\",\"doc_4项目业务_0-项目点_大屏项目适应.md\":\"D4NyXlp8\",\"doc_4项目业务_0-项目点_爱学网app.md\":\"DrZf_mQ-\",\"doc_4项目业务_0-项目点_爱学网web.md\":\"DmTId5qj\",\"doc_4项目业务_1-技术点_开发中遇到的问题.md\":\"BeG-ft4R\",\"doc_4项目业务_1-技术点_资源.md\":\"DMwwox85\",\"doc_4项目业务_2-项目学习_micro-app.md\":\"DHcX_QN2\",\"doc_4项目业务_2-项目学习_vue-vben-admin.md\":\"DuwdWpw4\",\"doc_4项目业务_2-项目学习_性能优化.md\":\"sQvt4EAh\",\"doc_6工程化_1-cicd_cicd.md\":\"D8MfwJAS\",\"doc_6工程化_1-cicd_openssh.md\":\"DZpwN30a\",\"doc_6工程化_3-nginx_nginx-上.md\":\"G1nfwUtI\",\"doc_6工程化_3-nginx_nginx-下.md\":\"cwALw2cW\",\"doc_6工程化_4-node_node.md\":\"CBW0koeC\",\"doc_6工程化_6-cdn_cdn.md\":\"BZ3ZzTko\",\"doc_7阅读_读书笔记.md\":\"6mbrw8v9\",\"doc_8面试_面经.md\":\"DiuvyoMC\",\"doc_readme.md\":\"8CrW8vpK\",\"index.md\":\"D37tqQaZ\",\"link.md\":\"BWHXRPOC\",\"readme.md\":\"DqkX1V3O\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"个人学习阅读文档\",\"description\":\"A VitePress Site21\",\"base\":\"/doc/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/link.md\"},{\"text\":\"README\",\"link\":\"/doc/README.md\"},{\"text\":\"文档\",\"link\":\"/doc/6工程化/3-nginx/Nginx-上.md\"}],\"sidebar\":[{\"text\":\"基建学习\",\"items\":[{\"text\":\"Nginx-上\",\"link\":\"/doc/6工程化/3-nginx/Nginx-上.md\"},{\"text\":\"Nginx-下\",\"link\":\"/doc/6工程化/3-nginx/Nginx-下.md\"}]},{\"text\":\"基础\",\"items\":[{\"text\":\"js\",\"link\":\"/doc/1基础/2-js/js.md\"},{\"text\":\"html\",\"link\":\"/doc/1基础/1-html/html.md\"},{\"text\":\"css\",\"link\":\"/doc/1基础/0-css/css.md\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"},{\"icon\":{\"svg\":\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"300\\\" height=\\\"300\\\" viewBox=\\\"0 0 20 20\\\"><g fill=\\\"none\\\"><path fill=\\\"currentColor\\\" d=\\\"M6.5 2h6.685a1.5 1.5 0 0 1 1.106.486l4.314 4.702A1.5 1.5 0 0 1 19 8.202V18.5a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 5 18.5v-15A1.5 1.5 0 0 1 6.5 2\\\" opacity=\\\".2\\\"></path><path fill=\\\"currentColor\\\" d=\\\"M6.5 12.5a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1zm0 2.5a.5.5 0 0 1 0-1h7a.5.5 0 0 1 0 1z\\\"></path><path fill=\\\"currentColor\\\" fill-rule=\\\"evenodd\\\" d=\\\"M11.185 1H4.5A1.5 1.5 0 0 0 3 2.5v15A1.5 1.5 0 0 0 4.5 19h11a1.5 1.5 0 0 0 1.5-1.5V7.202a1.5 1.5 0 0 0-.395-1.014l-4.314-4.702A1.5 1.5 0 0 0 11.185 1M4 2.5a.5.5 0 0 1 .5-.5h6.685a.5.5 0 0 1 .369.162l4.314 4.702a.5.5 0 0 1 .132.338V17.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5z\\\" clip-rule=\\\"evenodd\\\"></path><path stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" d=\\\"M11.5 2.1v4.7h4.7\\\"></path><path fill=\\\"currentColor\\\" d=\\\"M8.134 6.133a1.067 1.067 0 1 0 0-2.133a1.067 1.067 0 0 0 0 2.133\\\"></path><path fill=\\\"currentColor\\\" fill-rule=\\\"evenodd\\\" d=\\\"M10.266 8.444c0-1.134-.955-1.955-2.133-1.955S6 7.309 6 8.444v.534a.356.356 0 0 0 .356.355h3.555a.356.356 0 0 0 .355-.355z\\\" clip-rule=\\\"evenodd\\\"></path></g></svg>\"},\"link\":\"http://8.134.38.38/assets/%E5%89%8D%E7%AB%AF-%E9%BB%84%E6%96%AF%E5%A9%B7-%E4%B8%89%E5%B9%B4.pdf\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>